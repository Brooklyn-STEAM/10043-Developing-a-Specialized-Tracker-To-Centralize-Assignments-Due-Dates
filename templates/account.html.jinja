<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PlotPoint</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="/static/styles.css" rel="stylesheet">
</head>

<body class=" bg-cstm-green">
  {% include "components/navbar.html.jinja" %}
{%for message in get_flashed_messages()%}
    <div class="container alert alert-danger mt-2" role="alert">
        {{message}}
    </div>
    {%endfor%}

    <h1 class="text-center mt-3">Settings</h1>

    <main class="container mt-3">
        <div class="card">
            <div class="card-header card-header text-center h3">
                Account Information
            </div>
            <div class="card-body">
                <svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" width="40" height="40">
                    <path
                        d="M3 13v.5h1V13H3zm8 0v.5h1V13h-1zm-7 0v-.5H3v.5h1zm2.5-3h2V9h-2v1zm4.5 2.5v.5h1v-.5h-1zM8.5 10a2.5 2.5 0 012.5 2.5h1A3.5 3.5 0 008.5 9v1zM4 12.5A2.5 2.5 0 016.5 10V9A3.5 3.5 0 003 12.5h1zM7.5 3A2.5 2.5 0 005 5.5h1A1.5 1.5 0 017.5 4V3zM10 5.5A2.5 2.5 0 007.5 3v1A1.5 1.5 0 019 5.5h1zM7.5 8A2.5 2.5 0 0010 5.5H9A1.5 1.5 0 017.5 7v1zm0-1A1.5 1.5 0 016 5.5H5A2.5 2.5 0 007.5 8V7zm0 7A6.5 6.5 0 011 7.5H0A7.5 7.5 0 007.5 15v-1zM14 7.5A6.5 6.5 0 017.5 14v1A7.5 7.5 0 0015 7.5h-1zM7.5 1A6.5 6.5 0 0114 7.5h1A7.5 7.5 0 007.5 0v1zm0-1A7.5 7.5 0 000 7.5h1A6.5 6.5 0 017.5 1V0z"
                        fill="currentColor"></path>
                </svg>
                <h5 class="card-title d-inline fs-4">{{current_user.username}}</h5>
                <br>
               <br>
               <p>Click on the "Choose File" button to upload a calendar file:</p>
              
               <form action="/fileupload" method="post" enctype="multipart/form-data">
                 <input class="" type="file" id="myFile" name="filename">
                 <input class="rounded-pill btn btn-success" type="submit">
               </form>

            </div>
        </div>

        <div class="card mt-3 mb-4">
            <div class="card-header card-header text-center h3">
                Account Options
            </div>
            <div id="setting-card" class="card-body">

                <ul class="list-group list-group-flush">
                    <li class="list-group-item my-2">
                        <h5 class="card-title h4">Change Password</h5>

                        <form action="/settings/change_password" method="post" class="mt-3">
                            <div class="mb-3">
                                <label for="currentPasswordInput" class="form-label">Current Password</label>
                                <div class="input-group">
                                    <input type="password" class="form-control text-box mb-2" name="currentPasswordInput"
                                        id="currentPasswordInput" aria-describedby="currentPasswordInput">

                                    <div>
                                        <button id="hide_current_password_btn" onclick="hide_current_password()" class="btn btn-outline-dark" type="button">
                                            <svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"
                                                width="15" height="15">
                                                <path
                                                    d="M7.5 9C5.186 9 3.561 7.848 2.497 6.666a9.368 9.368 0 01-1.449-2.164 5.065 5.065 0 01-.08-.18l-.004-.007v-.001L.5 4.5l-.464.186v.002l.003.004a2.107 2.107 0 00.026.063l.078.173a10.367 10.367 0 001.61 2.406C2.94 8.652 4.814 10 7.5 10V9zm7-4.5a68.887 68.887 0 01-.464-.186l-.003.008-.015.035-.066.145a9.37 9.37 0 01-1.449 2.164C11.44 7.848 9.814 9 7.5 9v1c2.686 0 4.561-1.348 5.747-2.666a10.365 10.365 0 001.61-2.406 6.164 6.164 0 00.104-.236l.002-.004v-.001h.001L14.5 4.5zM8 12V9.5H7V12h1zm-6.646-1.646l2-2-.708-.708-2 2 .708.708zm10.292-2l2 2 .708-.708-2-2-.708.708z"
                                                    fill="currentColor"></path>
                                            </svg>
                                        </button>

                                        <button id="show_current_password_btn" onclick="show_current_password()" class="btn btn-outline-dark" type="button">
                                            <svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"
                                                width="15" height="15">
                                                <path
                                                    d="M.5 7.5l-.464-.186a.5.5 0 000 .372L.5 7.5zm14 0l.464.186a.5.5 0 000-.372L14.5 7.5zm-7 4.5c-2.314 0-3.939-1.152-5.003-2.334a9.368 9.368 0 01-1.449-2.164 5.065 5.065 0 01-.08-.18l-.004-.007v-.001L.5 7.5l-.464.186v.002l.003.004a2.107 2.107 0 00.026.063l.078.173a10.368 10.368 0 001.61 2.406C2.94 11.652 4.814 13 7.5 13v-1zm-7-4.5l.464.186.004-.008a2.62 2.62 0 01.08-.18 9.368 9.368 0 011.449-2.164C3.56 4.152 5.186 3 7.5 3V2C4.814 2 2.939 3.348 1.753 4.666a10.367 10.367 0 00-1.61 2.406 6.05 6.05 0 00-.104.236l-.002.004v.001H.035L.5 7.5zm7-4.5c2.314 0 3.939 1.152 5.003 2.334a9.37 9.37 0 011.449 2.164 4.705 4.705 0 01.08.18l.004.007v.001L14.5 7.5l.464-.186v-.002l-.003-.004a.656.656 0 00-.026-.063 9.094 9.094 0 00-.39-.773 10.365 10.365 0 00-1.298-1.806C12.06 3.348 10.186 2 7.5 2v1zm7 4.5a68.887 68.887 0 01-.464-.186l-.003.008-.015.035-.066.145a9.37 9.37 0 01-1.449 2.164C11.44 10.848 9.814 12 7.5 12v1c2.686 0 4.561-1.348 5.747-2.665a10.366 10.366 0 001.61-2.407 6.164 6.164 0 00.104-.236l.002-.004v-.001h.001L14.5 7.5zM7.5 9A1.5 1.5 0 016 7.5H5A2.5 2.5 0 007.5 10V9zM9 7.5A1.5 1.5 0 017.5 9v1A2.5 2.5 0 0010 7.5H9zM7.5 6A1.5 1.5 0 019 7.5h1A2.5 2.5 0 007.5 5v1zm0-1A2.5 2.5 0 005 7.5h1A1.5 1.5 0 017.5 6V5z"
                                                    fill="currentColor"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <label for="newPasswordInput" class="form-label">New Password</label>
                                <div class="input-group">
                                    <input type="password" class="form-control text-box mb-2" name="newPasswordInput"
                                        id="newPasswordInput" aria-describedby="newPasswordInput">
                                    <div>
                                        <button id="hide_new_password_btn" onclick="hide_new_password()" class="btn btn-outline-dark" type="button">
                                            <svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"
                                                width="15" height="15">
                                                <path
                                                    d="M7.5 9C5.186 9 3.561 7.848 2.497 6.666a9.368 9.368 0 01-1.449-2.164 5.065 5.065 0 01-.08-.18l-.004-.007v-.001L.5 4.5l-.464.186v.002l.003.004a2.107 2.107 0 00.026.063l.078.173a10.367 10.367 0 001.61 2.406C2.94 8.652 4.814 10 7.5 10V9zm7-4.5a68.887 68.887 0 01-.464-.186l-.003.008-.015.035-.066.145a9.37 9.37 0 01-1.449 2.164C11.44 7.848 9.814 9 7.5 9v1c2.686 0 4.561-1.348 5.747-2.666a10.365 10.365 0 001.61-2.406 6.164 6.164 0 00.104-.236l.002-.004v-.001h.001L14.5 4.5zM8 12V9.5H7V12h1zm-6.646-1.646l2-2-.708-.708-2 2 .708.708zm10.292-2l2 2 .708-.708-2-2-.708.708z"
                                                    fill="currentColor"></path>
                                            </svg>
                                        </button>

                                        <button id="show_new_password_btn" onclick="show_new_password()" class="btn btn-outline-dark" type="button">
                                            <svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"
                                                width="15" height="15">
                                                <path
                                                    d="M.5 7.5l-.464-.186a.5.5 0 000 .372L.5 7.5zm14 0l.464.186a.5.5 0 000-.372L14.5 7.5zm-7 4.5c-2.314 0-3.939-1.152-5.003-2.334a9.368 9.368 0 01-1.449-2.164 5.065 5.065 0 01-.08-.18l-.004-.007v-.001L.5 7.5l-.464.186v.002l.003.004a2.107 2.107 0 00.026.063l.078.173a10.368 10.368 0 001.61 2.406C2.94 11.652 4.814 13 7.5 13v-1zm-7-4.5l.464.186.004-.008a2.62 2.62 0 01.08-.18 9.368 9.368 0 011.449-2.164C3.56 4.152 5.186 3 7.5 3V2C4.814 2 2.939 3.348 1.753 4.666a10.367 10.367 0 00-1.61 2.406 6.05 6.05 0 00-.104.236l-.002.004v.001H.035L.5 7.5zm7-4.5c2.314 0 3.939 1.152 5.003 2.334a9.37 9.37 0 011.449 2.164 4.705 4.705 0 01.08.18l.004.007v.001L14.5 7.5l.464-.186v-.002l-.003-.004a.656.656 0 00-.026-.063 9.094 9.094 0 00-.39-.773 10.365 10.365 0 00-1.298-1.806C12.06 3.348 10.186 2 7.5 2v1zm7 4.5a68.887 68.887 0 01-.464-.186l-.003.008-.015.035-.066.145a9.37 9.37 0 01-1.449 2.164C11.44 10.848 9.814 12 7.5 12v1c2.686 0 4.561-1.348 5.747-2.665a10.366 10.366 0 001.61-2.407 6.164 6.164 0 00.104-.236l.002-.004v-.001h.001L14.5 7.5zM7.5 9A1.5 1.5 0 016 7.5H5A2.5 2.5 0 007.5 10V9zM9 7.5A1.5 1.5 0 017.5 9v1A2.5 2.5 0 0010 7.5H9zM7.5 6A1.5 1.5 0 019 7.5h1A2.5 2.5 0 007.5 5v1zm0-1A2.5 2.5 0 005 7.5h1A1.5 1.5 0 017.5 6V5z"
                                                    fill="currentColor"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>

                                <label for="confirmNewPasswordInput" class="form-label">Confirm New Password</label>
                                <div class="input-group">
                                    <input type="password" class="form-control text-box mb-2" name="confirmNewPasswordInput"
                                        id="confirmNewPasswordInput" aria-describedby="confirmNewPasswordInput">
                                        
                                    <div>
                                        <button id="hide_confirm_password_btn" onclick="hide_confirm_password()" class="btn btn-outline-dark" type="button">
                                            <svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"
                                                width="15" height="15">
                                                <path
                                                    d="M7.5 9C5.186 9 3.561 7.848 2.497 6.666a9.368 9.368 0 01-1.449-2.164 5.065 5.065 0 01-.08-.18l-.004-.007v-.001L.5 4.5l-.464.186v.002l.003.004a2.107 2.107 0 00.026.063l.078.173a10.367 10.367 0 001.61 2.406C2.94 8.652 4.814 10 7.5 10V9zm7-4.5a68.887 68.887 0 01-.464-.186l-.003.008-.015.035-.066.145a9.37 9.37 0 01-1.449 2.164C11.44 7.848 9.814 9 7.5 9v1c2.686 0 4.561-1.348 5.747-2.666a10.365 10.365 0 001.61-2.406 6.164 6.164 0 00.104-.236l.002-.004v-.001h.001L14.5 4.5zM8 12V9.5H7V12h1zm-6.646-1.646l2-2-.708-.708-2 2 .708.708zm10.292-2l2 2 .708-.708-2-2-.708.708z"
                                                    fill="currentColor"></path>
                                            </svg>
                                        </button>

                                        <button id="show_confirm_password_btn" onclick="show_confirm_password()" class="btn btn-outline-dark" type="button">
                                            <svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"
                                                width="15" height="15">
                                                <path
                                                    d="M.5 7.5l-.464-.186a.5.5 0 000 .372L.5 7.5zm14 0l.464.186a.5.5 0 000-.372L14.5 7.5zm-7 4.5c-2.314 0-3.939-1.152-5.003-2.334a9.368 9.368 0 01-1.449-2.164 5.065 5.065 0 01-.08-.18l-.004-.007v-.001L.5 7.5l-.464.186v.002l.003.004a2.107 2.107 0 00.026.063l.078.173a10.368 10.368 0 001.61 2.406C2.94 11.652 4.814 13 7.5 13v-1zm-7-4.5l.464.186.004-.008a2.62 2.62 0 01.08-.18 9.368 9.368 0 011.449-2.164C3.56 4.152 5.186 3 7.5 3V2C4.814 2 2.939 3.348 1.753 4.666a10.367 10.367 0 00-1.61 2.406 6.05 6.05 0 00-.104.236l-.002.004v.001H.035L.5 7.5zm7-4.5c2.314 0 3.939 1.152 5.003 2.334a9.37 9.37 0 011.449 2.164 4.705 4.705 0 01.08.18l.004.007v.001L14.5 7.5l.464-.186v-.002l-.003-.004a.656.656 0 00-.026-.063 9.094 9.094 0 00-.39-.773 10.365 10.365 0 00-1.298-1.806C12.06 3.348 10.186 2 7.5 2v1zm7 4.5a68.887 68.887 0 01-.464-.186l-.003.008-.015.035-.066.145a9.37 9.37 0 01-1.449 2.164C11.44 10.848 9.814 12 7.5 12v1c2.686 0 4.561-1.348 5.747-2.665a10.366 10.366 0 001.61-2.407 6.164 6.164 0 00.104-.236l.002-.004v-.001h.001L14.5 7.5zM7.5 9A1.5 1.5 0 016 7.5H5A2.5 2.5 0 007.5 10V9zM9 7.5A1.5 1.5 0 017.5 9v1A2.5 2.5 0 0010 7.5H9zM7.5 6A1.5 1.5 0 019 7.5h1A2.5 2.5 0 007.5 5v1zm0-1A2.5 2.5 0 005 7.5h1A1.5 1.5 0 017.5 6V5z"
                                                    fill="currentColor"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>

                            </div>
                            <button type="submit" class="btn btn-primary mb-2 account-btn">Change Password</button>
                        </form>
                    </li>

                    <li class="list-group-item my-2">
                        <h5 class="card-title h4">Delete Account</h5>
                        <div class="mb-3">
                            <label for="deleteAccount" class="form-label">Would you like to delete your account?</label>
                            <br>
                            <!-- Button trigger modal -->
                            <button type="button" id="delete-cover" class="mt-2 btn btn-danger" data-bs-toggle="modal"
                                data-bs-target="#deleteAccountModal">
                                Delete Account
                            </button>
                            <!-- Modal -->
                            <div class="modal fade" id="deleteAccountModal" tabindex="-1"
                                aria-labelledby="deleteAccountModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h1 class="modal-title fs-5 text-danger" id="deleteAccountModalLabel">
                                                Account Deletion Confirmation</h1>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <p>Deleting your account will <b>erase all of your data.</b></p>
                                            <p>Are you sure you want to delete your account?</p>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-bs-dismiss="modal">Close</button>
                                            <form action="/acc/delete_account" method="post">
                                                <button type="submit" id="delete-btn" class="btn btn-danger">Delete
                                                    Account</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </li>

                </ul>
            </div>
        </div>

    </main>


    {% include "components/footer.html.jinja"%}
    <svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" width="15" height="15">
    <path
          d="M4.5 14.5v-3a1 1 0 011-1h4a1 1 0 011 1v3m3 0h-12a1 1 0 01-1-1v-12a1 1 0 011-1h8.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V13.5a1 1 0 01-1 1z"
          stroke="currentColor">
        </path>
      </svg>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous">
    </script>
    <script>
        // Hide buttons
        document.getElementById('hide_current_password_btn').style.display = 'none';
        document.getElementById('hide_new_password_btn').style.display = 'none';
        document.getElementById('hide_confirm_password_btn').style.display = 'none';

        // Toggles current password input
        function show_current_password() {
            document.getElementById('currentPasswordInput').type = 'text';
            document.getElementById('show_current_password_btn').style.display = 'none';
            document.getElementById('hide_current_password_btn').style.display = 'block';
        }

        function hide_current_password() {
            document.getElementById('currentPasswordInput').type = 'password';
            document.getElementById('show_current_password_btn').style.display = 'block';
            document.getElementById('hide_current_password_btn').style.display = 'none';
        }

        // Toggles new password input
        function show_new_password() {
            document.getElementById('newPasswordInput').type = 'text';
            document.getElementById('show_new_password_btn').style.display = 'none';
            document.getElementById('hide_new_password_btn').style.display = 'block';
        }

        function hide_new_password() {
            document.getElementById('newPasswordInput').type = 'password';
            document.getElementById('show_new_password_btn').style.display = 'block';
            document.getElementById('hide_new_password_btn').style.display = 'none';
        }

        // Toggle confirm password input
        function show_confirm_password() {
            document.getElementById('confirmNewPasswordInput').type = 'text';
            document.getElementById('show_confirm_password_btn').style.display = 'none';
            document.getElementById('hide_confirm_password_btn').style.display = 'block';
        }

        function hide_confirm_password() {
            document.getElementById('confirmNewPasswordInput').type = 'password';
            document.getElementById('show_confirm_password_btn').style.display = 'block';
            document.getElementById('hide_confirm_password_btn').style.display = 'none';
        }


    </script>
</body>

</html>